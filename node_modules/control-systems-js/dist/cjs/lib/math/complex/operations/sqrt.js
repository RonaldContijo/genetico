"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.sqrt = void 0;
const complex_1 = require("../complex");
const isNumber_1 = require("../utils/isNumber");
const abs_1 = require("./abs");
function sqrt(value) {
    if ((0, isNumber_1.isNumber)(value)) {
        return Math.sqrt(value);
    }
    let resultRe;
    let resultIm;
    const { re, im } = value;
    const absValue = (0, abs_1.abs)(value);
    if (re >= 0) {
        if (im === 0) {
            return (0, complex_1.complex)(Math.sqrt(re), 0);
        }
        resultRe = 0.5 * Math.sqrt(2.0 * (absValue + re));
    }
    else {
        resultRe = Math.abs(im) / Math.sqrt(2 * (absValue - re));
    }
    if (re <= 0) {
        resultIm = 0.5 * Math.sqrt(2.0 * (absValue - re));
    }
    else {
        resultIm = Math.abs(im) / Math.sqrt(2 * (absValue + re));
    }
    resultIm = im < 0 ? -resultIm : resultIm;
    return (0, complex_1.complex)(resultRe, resultIm);
}
exports.sqrt = sqrt;
//# sourceMappingURL=../../../../../../src/lib/math/complex/operations/sqrt.js.map